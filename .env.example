# Beat Analyzer Konfiguration
# Kopiere diese Datei nach .env und passe sie an

# JACK Client Name
JACK_CLIENT_NAME=beat-analyzer

# BPM Range
BPM_MIN=60
BPM_MAX=140

# Log Level (0=DEBUG, 1=INFO, 2=WARN, 3=ERROR)
LOG_LEVEL=1

# Feature Toggles (1=aktiviert, 0=deaktiviert)
ENABLE_BEATCLOCK=1
ENABLE_BEAT=1
ENABLE_VU_RMS=1
ENABLE_VU_PEAK=1
ENABLE_VU=1

# Anzahl der BPM-Eingänge (0-8) - JACK Ports: bpm_1, bpm_2, ...
NUM_BPM_CHANNELS=1

# Anzahl der VU-Eingänge (0-8) - JACK Ports: vu_1, vu_2, ...
NUM_VU_CHANNELS=12

# OSC Ziele - Format: OSC_HOST_Name=host:port
# Beliebig viele Ziele möglich, werden automatisch erkannt
OSC_HOST_radla=192.168.43.96:9000
OSC_HOST_mixer=192.168.43.55:7771
OSC_HOST_motion=192.168.43.54:7771

# VU-Meter Konfiguration
# RMS Attack: 0.0-1.0 (höher = schnellere Reaktion auf lauter)
VU_RMS_ATTACK=0.8
# RMS Release: 0.0-1.0 (höher = schnellerer Abfall)
VU_RMS_RELEASE=0.2
# Peak Falloff: dB pro Sekunde
VU_PEAK_FALLOFF=20.0

# OSC Sende-Rate in Hz (1-100, Standard: 25)
# Gilt für VU-Meter und andere periodische OSC-Nachrichten
OSC_SEND_RATE=25

# Debug: Konsolen-Output (1=aktiviert, 0=deaktiviert)
DEBUG_VU_CONSOLE=0
DEBUG_BPM_CONSOLE=1
# Beat Detection Latenz-Kompensation (in Millisekunden)
# Kompensiert die Analyse-Verzögerung (FFT-Zentrum + Peak Detection + Ringpuffer)
# Bei frameSize=512, hopSize=256: Standard 18ms
BEAT_LATENCY_MS=15

# === Signal-Conditioning für Beat Detection ===

# Auto Gain Control (RMS-basiert) - normalisiert Eingangssignal
# Stabiler als Peak-basiert bei perkussivem Material
AGC_ENABLED=1
AGC_TARGET_RMS=0.3
AGC_MAX_GAIN=40.0

# Expander - verstärkt Dynamik (leise leiser, laut lauter)
# Macht Beats deutlicher erkennbar
EXPANDER_ENABLED=1
EXPANDER_THRESHOLD=0.1
EXPANDER_RATIO=2.0

# OSC Empfang für externe Beat-Clock (Training-Modus)
# Empfängt: /beat iii (beat, bar, bpm)
#           /clockmode i (0=Training, 1=Eigene Beatclock)
#           /tap i (Beat-Nummer 1-4 setzen)
OSC_RECEIVE_PORT=7775
BTRACK_HOP_SIZE=512
